import{r as o,i as B,h as H,j as e,o as P,B as D}from"./index-CcQ31UA2.js";import{b as R,c as g,a as f}from"./index.esm-DMOZoxqD.js";import F from"./Resetpassword-CEK-mZm-.js";import{C as j,a as c}from"./CRow-qT5a8l9s.js";import{C as A}from"./CCardBody-BG4Ko6Cs.js";import{C as E}from"./CForm-BLq4MfsE.js";import{C as w}from"./CInputGroup-CeQY4StZ.js";import{C as b}from"./CInputGroupText-tgqD37tD.js";import{c as T}from"./cil-user-Ddrdy7PS.js";import{C as y}from"./CFormInput-BS0KPjD4.js";import{c as U}from"./cil-lock-locked-DmxpJbVL.js";import{C as V,a as z,b as W}from"./CModalHeader-YWOTglT5.js";import{C as G}from"./CModalTitle-DZC6LOP_.js";import{C as Z}from"./CModalFooter-BZM-fphF.js";import"./index-CrnPcN9h.js";import"./CFormLabel-LtYOgfC7.js";import"./CConditionalPortal-DQP_4tIk.js";var _=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144A128,128,0,0,0,166.418,52.57l22.4,22.855A96,96,0,0,1,352,144v56H88V328c0,92.636,75.364,168,168,168s168-75.364,168-168V200Zm8,128c0,74.99-61.009,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"];const Ce=()=>{const[d,N]=o.useState(""),[$,q]=o.useState([]),[m,v]=o.useState(""),[p,r]=o.useState(null),[u,h]=o.useState(!1),[J,K]=o.useState(""),[O,Q]=o.useState(""),[i,S]=o.useState(!1),{setDoctorData:X,fetchHospitalDetails:k}=B(),[I,l]=o.useState(!1),L=H(),M=async a=>{var x,C;a.preventDefault(),h(!0),r(null);try{console.log("hi");const t=await P.post(`${D}/clinicLogin`,{userName:d,password:m},{headers:{"Content-Type":"application/json"}});if(console.log(t),t.data.success){const s=t.data.hospitalId,n=t.data.hospitalName;localStorage.setItem("HospitalId",s),localStorage.setItem("HospitalName",n),console.log(s),console.log(n),await k(s),s==null||s==""||n==null||n==""?r("No hospital found."):(r(null),L("/dashboard"))}}catch(t){const s=((C=(x=t.response)==null?void 0:x.data)==null?void 0:C.message)||"An unexpected error occurred.";s.toLowerCase().includes("username")?r("Invalid username."):s.toLowerCase().includes("password")?r("Invalid password."):r(s),console.error("Error details:",t.response||t.message)}finally{h(!1)}};return e.jsxs("div",{className:"min-vh-100 d-flex flex-row align-items-center",style:{backgroundImage:'url("/assets/bg.jpg")',backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx(R,{children:e.jsx(j,{className:"justify-content-center",children:e.jsxs(c,{md:6,children:[e.jsxs("h1",{className:"position-absolute top-0 end-0 me-5 mt-3 text-center",style:{right:"10px"},children:[e.jsx("strong",{style:{color:"white",fontWeight:"bold",display:"block"},children:"Derma Care, Hyderabad"}),e.jsx("p",{style:{color:"#99C5F4",fontSize:"25px",marginTop:"8px",marginBottom:"0"},children:"Powered By Chiselon Technologies"})]}),e.jsx(A,{children:e.jsxs(E,{onSubmit:M,children:[e.jsx("h2",{className:"text-center mb-4",style:{color:"white",fontSize:"25px"},children:"Admin Login"}),p&&e.jsx("p",{className:"text-danger text-center",children:p}),e.jsxs(w,{className:"mb-3 w-50 mx-auto",children:[e.jsx(b,{children:e.jsx(g,{icon:T})}),e.jsx(y,{placeholder:"Username",autoComplete:"userName",value:d,onChange:a=>N(a.target.value)})]}),e.jsxs(w,{className:"mb-3 w-50 mx-auto",children:[e.jsx(b,{onClick:()=>S(!i),style:{cursor:"pointer"},children:e.jsx(g,{icon:i?_:U})}),e.jsx(y,{type:i?"text":"password",placeholder:"Password",autoComplete:"current-password",value:m,onChange:a=>v(a.target.value)})]}),e.jsx(j,{className:"mt-4 text-center",children:e.jsx(c,{children:e.jsx("a",{href:"#",className:"text-decoration-none text-white",style:{fontWeight:"bold"},onClick:a=>{a.preventDefault(),l(!0)},children:"Change password?"})})}),e.jsx(c,{xs:12,className:"text-center",children:e.jsx(f,{style:{backgroundColor:"#0A6FDBFF",fontWeight:"bold"},className:"px-4 text-white mt-3",type:"submit",disabled:u,children:u?"Logging in...":"Login"})})]})})]})})}),e.jsxs(V,{visible:I,onClose:()=>l(!1),children:[e.jsx(z,{children:e.jsx(G,{children:"Reset Password"})}),e.jsx(W,{children:e.jsx(F,{onClose:()=>l(!1)})}),e.jsx(Z,{children:e.jsx(f,{color:"secondary",onClick:()=>l(!1),children:"Close"})})]})]})};export{Ce as default};
